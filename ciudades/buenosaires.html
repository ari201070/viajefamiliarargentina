<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="page-title">Buenos Aires | Viaje Familiar a Argentina</title>
    <!-- <link rel="stylesheet" href="../css/styles.css"> -->
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; color: #333; }
        header { background-color: #004080; color: white; padding: 1em 0; text-align: center; }
        header h1 { margin: 0; }
        nav { position: fixed; top: 10px; right: 10px; background-color: #fff; padding: 10px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 1000; }
        nav button, nav select, nav a { margin-left: 5px; padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; background-color: #f0f0f0; cursor: pointer; }
        nav button.active { background-color: #007bff; color: white; }
        nav a { text-decoration: none; color: #333; }
        .container { padding: 20px; max-width: 900px; margin: 80px auto 20px auto; background-color: white; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        h2 { color: #0056b3; border-bottom: 2px solid #0056b3; padding-bottom: 5px; }
        .cover-image { width: 100%; max-height: 400px; object-fit: cover; border-radius: 8px; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f0f0f0; }
        .ai-section { background-color: #e9f5ff; padding: 15px; border-radius: 8px; margin-top: 20px; }
        .ai-section h3 { color: #007bff; }
        .ai-section button { background-color: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 4px; cursor: pointer; margin-top: 10px; }
        .ai-section button:hover { background-color: #0056b3; }
        .ai-response { margin-top: 10px; padding: 10px; background-color: #fff; border: 1px solid #eee; border-radius: 4px; white-space: pre-wrap; }
        footer { text-align: center; padding: 20px; background-color: #333; color: white; margin-top: 30px; }
    </style>
</head>
<body>
    <header>
        <h1 id="city-title" data-i18n="city-title">Buenos Aires</h1>
    </header>

    <nav>
        <button id="btn-es" onclick="translatePage('es')">ES</button>
        <button id="btn-he" onclick="translatePage('he')">HE</button>
        <select id="moneda" onchange="cambiarMoneda()">
            <option value="ARS">ARS</option>
            <option value="USD">USD</option>
            <option value="EUR">EUR</option>
            <option value="ILS">ILS</option>
        </select>
        <span id="precio-en-moneda-seleccionada"></span>
        <a href="../index.html" data-i18n="common.back-link">‚¨Ö Volver al itinerario</a>
    </nav>

    <div class="container">
        <img src="../docs/imagenes/buenosaires/buenosaires.jpg" alt="Foto de portada de Buenos Aires" class="cover-image" data-i18n-alt="foto-caption">

        <section id="welcome">
            <p data-i18n="welcome-text">Buenos Aires es la capital de la Rep√∫blica Argentina...</p>
        </section>

        <section id="dates-duration">
            <h2 data-i18n="dates-duration-title">Fechas y duraci√≥n</h2>
            <p data-i18n="stay-duration">**Estad√≠a**: 28/09 al 02/10 (5 d√≠as) y 29/10 (1 d√≠a)</p>
            <p data-i18n="how-to-arrive">**C√≥mo llegar**: Llegada internacional (EZE/AEP) / Vuelo desde Corrientes para la √∫ltima noche</p>
        </section>

        <section id="main-attractions">
            <h2 data-i18n="main-attractions-title">Lugares imperdibles</h2>
            <ul id="main-attractions-list">
                <li><a href="https://es.wikipedia.org/wiki/Obelisco_de_Buenos_Aires" target="_blank" data-i18n="attraction-0">Obelisco y Avenida 9 de Julio</a></li>
                <li><a href="https://teatrocolon.org.ar/" target="_blank" data-i18n="attraction-1">Teatro Col√≥n (visitas guiadas)</a></li>
                <li><a href="https://turismo.buenosaires.gob.ar/es/atractivo/caminito" target="_blank" data-i18n="attraction-2">Caminito y el colorido barrio de La Boca</a></li>
                <li><a href="https://turismo.buenosaires.gob.ar/es/atractivo/parque-tres-de-febrero" target="_blank" data-i18n="attraction-3">Palermo: bosques, Jard√≠n Japon√©s, museos, caf√©s y tiendas</a></li>
                <li><a href="https://planetario.buenosaires.gob.ar/" target="_blank" data-i18n="attraction-4">Planetario Galileo Galilei</a></li>
                <li><a href="https://turismo.buenosaires.gob.ar/es/atractivo/puerto-madero" target="_blank" data-i18n="attraction-5">Puerto Madero y Reserva Ecol√≥gica</a></li>
                <li><a href="https://www.bellasartes.gob.ar/" target="_blank" data-i18n="attraction-6">Museo Nacional de Bellas Artes</a></li>
                <li><a href="https://turismo.buenosaires.gob.ar/es/atractivo/cementerio-de-la-recoleta" target="_blank" data-i18n="attraction-7">Recoleta: Cementerio hist√≥rico, feria de artesanos y caf√©s</a></li>
                <li><a href="https://es.wikipedia.org/wiki/Plaza_de_Mayo" target="_blank" data-i18n="attraction-8">Plaza de Mayo y Casa Rosada</a></li>
            </ul>
        </section>

        <section id="recommended-activities">
            <h2 data-i18n="recommended-activities-title">Actividades recomendadas</h2>
            <ul>
                <li data-i18n="rec-activity-0">Tango y espect√°culos t√≠picos (San Telmo o La Boca)</li>
                <li data-i18n="rec-activity-1">Tours guiados a pie o en bicicleta</li>
                <li data-i18n="rec-activity-2">Picnic en los bosques de Palermo</li>
                <li data-i18n="rec-activity-3">Visita a museos y ferias artesanales</li>
                <li data-i18n="rec-activity-4">Paseo en barco por el R√≠o de la Plata (Puerto Madero)</li>
            </ul>
        </section>

        <section id="gastronomy">
            <h2 data-i18n="gastronomy-title">Gastronom√≠a destacada</h2>
            <p data-i18n="gastronomy-intro">La ciudad ofrece desde parrillas tradicionales...</p>

            <h3 data-i18n="restaurants-title">Restaurantes recomendados</h3>
            <table>
                <thead>
                    <tr>
                        <th data-i18n="table-restaurant">Restaurante</th>
                        <th data-i18n="common.table-type">Tipo</th>
                        <!-- Assuming Sin Gluten/Sin Az√∫car not explicitly in BA.md for these, but will keep columns for consistency -->
                        <th data-i18n="common.table-gluten-free">Sin Gluten</th>
                        <th data-i18n="common.table-sugar-free">Sin Az√∫car</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><a href="https://www.parrilladonjulio.com/" target="_blank" data-i18n="restaurant-name-0">Don Julio</a></td>
                        <td data-i18n="restaurant-type-0">(parrilla cl√°sica)</td>
                        <td data-i18n="restaurant-gluten-0">?</td>
                        <td data-i18n="restaurant-sugar-0">?</td>
                    </tr>
                    <tr>
                        <td><a href="https://www.cafetortoni.com.ar/" target="_blank" data-i18n="restaurant-name-1">Caf√© Tortoni</a></td>
                        <td data-i18n="restaurant-type-1">(hist√≥rico)</td>
                        <td data-i18n="restaurant-gluten-1">?</td>
                        <td data-i18n="restaurant-sugar-1">?</td>
                    </tr>
                    <tr>
                        <td><a href="https://www.sacro.com.ar/" target="_blank" data-i18n="restaurant-name-2">Sacro</a></td>
                        <td data-i18n="restaurant-type-2">(vegano gourmet)</td>
                        <td data-i18n="restaurant-gluten-2">‚úîÔ∏è</td>
                        <td data-i18n="restaurant-sugar-2">‚úîÔ∏è</td>
                    </tr>
                     <tr>
                        <td><a href="https://www.biorestaurant.com/" target="_blank" data-i18n="restaurant-name-3">Bio Restaurante</a></td>
                        <td data-i18n="restaurant-type-3">(org√°nico)</td>
                        <td data-i18n="restaurant-gluten-3">‚úîÔ∏è</td>
                        <td data-i18n="restaurant-sugar-3">‚úîÔ∏è</td>
                    </tr>
                </tbody>
            </table>
            <!-- No specific cafes table in buenosaires.md example, so omitting it -->
        </section>

        <section id="restaurant-types">
            <h2 data-i18n="restaurant-types-title">Tipos de restaurantes</h2>
            <ul>
                <li data-i18n="restaurant-category-0">Parrillas tradicionales</li>
                <li data-i18n="restaurant-category-1">Comida internacional</li>
                <li data-i18n="restaurant-category-2">Opciones vegetarianas y veganas</li>
                <li data-i18n="restaurant-category-3">Cafeter√≠as hist√≥ricas</li>
            </ul>
        </section>

        <section id="ai-menu-generator" class="ai-section">
            <h3 data-i18n="ai-menu-title">Generador de Men√∫ Saludable ‚ú®</h3>
            <p data-i18n="ai-menu-description">Obt√©n sugerencias de men√∫...</p>
            <button onclick="callGeminiAPI('ai-menu-prompt', 'ai-menu-response')" data-i18n="generate-menu-button">Generar Men√∫</button>
            <div id="ai-menu-response" class="ai-response"></div>
        </section>

        <section id="ai-accommodation-suggester" class="ai-section">
            <h3 data-i18n="ai-accommodation-title">Sugerencias de Alojamiento con IA üè®</h3>
            <p data-i18n="ai-accommodation-description">Obt√©n recomendaciones de alojamiento...</p>
            <button onclick="callGeminiAPI('ai-accommodation-prompt', 'ai-accommodation-response')" data-i18n="generate-accommodation-button">Generar Sugerencias</button>
            <div id="ai-accommodation-response" class="ai-response"></div>
        </section>

        <section id="ai-family-tips" class="ai-section">
            <h3 data-i18n="ai-family-tips-title">Consejos Adicionales para Familias con IA üë®‚Äçüë©‚Äçüëß‚Äçüë¶</h3>
            <p data-i18n="ai-family-tips-description">Recibe consejos personalizados...</p>
            <button onclick="callGeminiAPI('ai-family-tips-prompt', 'ai-family-tips-response')" data-i18n="generate-family-tips-button">Generar Consejos</button>
            <div id="ai-family-tips-response" class="ai-response"></div>
        </section>

        <section id="ai-budget-analysis" class="ai-section">
            <h3 data-i18n="ai-budget-title">An√°lisis de Presupuesto con IA üí∞</h3>
            <p data-i18n="ai-budget-description">Obt√©n un an√°lisis y desglose...</p>
            <button onclick="callGeminiAPI('ai-budget-prompt', 'ai-budget-analysis-response')" data-i18n="generate-budget-button">Analizar Presupuesto</button>
            <div id="ai-budget-analysis-response" class="ai-response"></div>
        </section>

        <section id="accommodation">
            <h2 data-i18n="accommodation-title">Alojamiento (ejemplos)</h2>
            <ul>
                <li data-i18n="accommodation-0">Alvear Palace</li>
                <li data-i18n="accommodation-1">Madero</li>
                <li data-i18n="accommodation-2">Ibis</li>
                <li data-i18n="accommodation-3">Airbnb Palermo</li>
            </ul>
        </section>

        <section id="coordinates">
            <h2 data-i18n="coordinates-title">Coordenadas aproximadas</h2>
            <p data-i18n="coordinates-text">34¬∞ 36' S 58¬∞ 22' 48" W</p>
        </section>

        <section id="events-agenda">
            <h2 data-i18n="events-agenda-title">Agenda de eventos</h2>
            <p data-i18n="event-0">**29/09/2025**: Festival de Tango al aire libre en Plaza Dorrego</p>
            <p data-i18n="event-1">**01/10/2025**: Noche de los Museos (entrada libre en museos seleccionados)</p>
            <p><a href="../docs/agenda/ariflier1970@gmail.com.ical.zip" data-i18n="download-agenda">Descargar agenda completa...</a></p>
        </section>

        <section id="family-tips">
            <h2 data-i18n="family-tips-title">Consejos para familias</h2>
            <ul>
                <li data-i18n="family-tip-0">Las zonas tur√≠sticas son seguras y est√°n bien conectadas por transporte p√∫blico (tarjeta SUBE).</li>
                <li data-i18n="family-tip-1">Hay muchas actividades gratuitas y para todas las edades.</li>
                <li data-i18n="family-tip-2">Los fines de semana suelen haber espect√°culos callejeros y ferias.</li>
                <li data-i18n="family-tip-3">Se recomienda reservar alojamiento con anticipaci√≥n en Palermo o Recoleta.</li>
            </ul>
        </section>

        <section id="budget">
            <h2 data-i18n="budget-title">Presupuesto orientativo</h2>
            <table>
                <thead>
                    <tr>
                        <th data-i18n="budget-concept">Concepto</th>
                        <th data-i18n="budget-price">Precio estimado (USD)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td data-i18n="budget-concept-0">Alojamiento (noche, familia)</td><td data-i18n="budget-price-0">50‚Äì120</td></tr>
                    <tr><td data-i18n="budget-concept-1">Comida (por d√≠a, familia)</td><td data-i18n="budget-price-1">30‚Äì70</td></tr>
                    <tr><td data-i18n="budget-concept-2">Transporte p√∫blico (por d√≠a)</td><td data-i18n="budget-price-2">3‚Äì5</td></tr>
                    <tr><td data-i18n="budget-concept-3">Actividades y tours (por d√≠a)</td><td data-i18n="budget-price-3">20‚Äì50</td></tr>
                    <tr><td data-i18n="budget-concept-4">Entradas museos/atracciones</td><td data-i18n="budget-price-4">0‚Äì15</td></tr>
                </tbody>
            </table>
        </section>

        <section id="cultural-tips">
            <h2 data-i18n="cultural-tips-title">Tips culturales</h2>
            <ul>
                <li data-i18n="cultural-tip-0">El idioma oficial es espa√±ol (rioplatense, muy amigable).</li>
                <li data-i18n="cultural-tip-1">Es com√∫n saludar con un beso en la mejilla.</li>
                <li data-i18n="cultural-tip-2">Los horarios de comida suelen ser m√°s tarde que en otros pa√≠ses (cena desde las 21:00).</li>
                <li data-i18n="cultural-tip-3">El mate es la infusi√≥n nacional.</li>
            </ul>
        </section>

        <section id="map">
            <h2 data-i18n="map-title">Mapa de Buenos Aires</h2>
            <iframe src="https://www.openstreetmap.org/export/embed.html?bbox=-58.5316%2C-34.7050%2C-58.2316%2C-34.5030&amp;layer=mapnik"
                    style="border: 1px solid black; width:100%; height: 400px;"
                    allowfullscreen></iframe>
            <br/>
            <small><a href="https://www.openstreetmap.org/#map=12/-34.6037/-58.3816" target="_blank" data-i18n="see-bigger-map">Ver mapa m√°s grande</a></small>
        </section>
    </div>

    <footer>
        <p>¬© 2024 Aventura Familiar Argentina. Todos los derechos reservados.</p>
    </footer>

    <script>
        let idiomaActual = localStorage.getItem('idiomaPreferido') || 'es';
        let monedaActual = localStorage.getItem('monedaPreferida') || 'ARS';
        let currentTranslations = {};
        const currentPageKey = 'buenosaires'; // **** UPDATED FOR BUENOS AIRES ****

        const tasasDeCambio = {
            ARS: { USD: 0.0011, EUR: 0.0010, ILS: 0.0041, ARS: 1 },
            USD: { ARS: 900, EUR: 0.92, ILS: 3.70, USD: 1 },
            EUR: { ARS: 980, USD: 1.08, ILS: 4.00, EUR: 1 },
            ILS: { ARS: 245, USD: 0.27, EUR: 0.25, ILS: 1 }
        };
        const simbolosMoneda = { ARS: '$', USD: 'US$', EUR: '‚Ç¨', ILS: '‚Ç™' };

        async function translatePage(language) {
          idiomaActual = language;
          document.documentElement.lang = language;
          document.body.dir = (language === 'he') ? 'rtl' : 'ltr';

          try {
            const response = await fetch(`../locales/${language}.json`);
            if (!response.ok) {
              console.error(`Error loading translation file for ${language}: ${response.statusText}`);
              currentTranslations = {};
            } else {
              currentTranslations = await response.json();
            }
          } catch (error) {
            console.error(`Error fetching translation file for ${language}:`, error);
            currentTranslations = {};
          }

          if (currentTranslations[currentPageKey] && currentTranslations[currentPageKey]["page-title"]) {
            document.title = currentTranslations[currentPageKey]["page-title"];
          } else if (currentTranslations.common && currentTranslations.common["page-title"]) {
             document.title = currentTranslations.common["page-title"]; // Fallback if specific city doesn't have page-title
          }


          document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            let textValue;

            let keyParts = key.split('.');
            if (keyParts.length === 2 && currentTranslations[keyParts[0]] && typeof currentTranslations[keyParts[0]][keyParts[1]] !== 'undefined') {
                textValue = currentTranslations[keyParts[0]][keyParts[1]];
            } else if (currentTranslations[currentPageKey] && typeof currentTranslations[currentPageKey][key] !== 'undefined') {
              textValue = currentTranslations[currentPageKey][key];
            } else if (currentTranslations.common && typeof currentTranslations.common[key] !== 'undefined') {
              textValue = currentTranslations.common[key];
            } else {
              textValue = el.textContent || key; // Keep existing text or key if no translation
              // console.warn(`Translation key "${key}" not found for page "${currentPageKey}" or common in ${language}.json. Using existing text or key.`);
            }

            if (el.hasAttribute('data-i18n-alt')) {
                const altKey = el.getAttribute('data-i18n-alt');
                 if (currentTranslations[currentPageKey] && typeof currentTranslations[currentPageKey][altKey] !== 'undefined') {
                    el.alt = currentTranslations[currentPageKey][altKey];
                } else if (currentTranslations.common && typeof currentTranslations.common[altKey] !== 'undefined') {
                    el.alt = currentTranslations.common[altKey];
                } else {
                    // el.alt = altKey; // Keep existing alt or key
                }
            }

            const elementsToUseInnerHTML = ['event-', 'stay-duration', 'how-to-arrive', 'welcome-text', 'gastronomy-intro', 'ai-menu-description', 'ai-accommodation-description', 'ai-family-tips-description', 'ai-budget-description'];
            if (elementsToUseInnerHTML.some(substring => key.includes(substring)) || el.tagName === 'A' && el.getAttribute('href').startsWith('#') === false) { // Use innerHTML for links to preserve them if textValue IS the key
              // For links, if textValue is the key (translation not found), we want to keep the original link text if any, or use key.
              // However, the current logic sets textValue to el.textContent above if key not found.
              // The primary goal is to set innerHTML for markdown/html content.
              // For other elements, if translation is missing, their textContent is already set to original or key.
              el.innerHTML = textValue;
            } else {
              el.textContent = textValue;
            }
          });

          document.getElementById('btn-es').classList.toggle('active', language === 'es');
          document.getElementById('btn-he').classList.toggle('active', language === 'he');
          localStorage.setItem('idiomaPreferido', language);
        }

        function cambiarMoneda() {
          monedaActual = document.getElementById('moneda').value;
          localStorage.setItem('monedaPreferida', monedaActual);

          const precioSpan = document.getElementById('precio-en-moneda-seleccionada');
          if (precioSpan) {
              precioSpan.textContent = `${simbolosMoneda[monedaActual]}`;
          }
        }

        async function callGeminiAPI(promptKey, responseDivId) {
            const responseDiv = document.getElementById(responseDivId);
            const currentLanguage = localStorage.getItem('idiomaPreferido') || 'es';
            let loadingMsg = "Generando..."; // Default
            if(currentTranslations.common && currentTranslations.common["ai-loading"]) {
                loadingMsg = currentTranslations.common["ai-loading"];
            }
             // Try page specific loading message
            if(currentTranslations[currentPageKey] && currentTranslations[currentPageKey]["ai-loading"]) {
                loadingMsg = currentTranslations[currentPageKey]["ai-loading"];
            }
            responseDiv.textContent = loadingMsg;

            let promptText = "";
            if (currentTranslations[currentPageKey] && typeof currentTranslations[currentPageKey][promptKey] !== 'undefined') {
                promptText = currentTranslations[currentPageKey][promptKey];
            } else if (currentTranslations.common && typeof currentTranslations.common[promptKey] !== 'undefined') { // Fallback to common for prompts
                promptText = currentTranslations.common[promptKey];
            }

            if (!promptText) {
                const errorMsgKey = "ai-error";
                let translatedError = "Error: Prompt not found.";
                if(currentTranslations.common && currentTranslations.common[errorMsgKey]) {
                    translatedError = currentTranslations.common[errorMsgKey];
                }
                if(currentTranslations[currentPageKey] && currentTranslations[currentPageKey][errorMsgKey]) {
                    translatedError = currentTranslations[currentPageKey][errorMsgKey];
                }
                responseDiv.textContent = translatedError + ` (Prompt ${promptKey} missing for ${currentLanguage})`;
                return;
            }

            console.log(`Simulating Gemini API call with prompt for ${currentPageKey}: ${promptText}`);
            setTimeout(() => {
                let simulatedResponse = `Respuesta simulada para "${promptKey}" en ${currentLanguage} para la p√°gina ${currentPageKey}. \n\nEste es un ejemplo de c√≥mo la IA podr√≠a responder.`;
                // Example: Customize simulated response based on currentPageKey and promptKey if needed
                if (currentPageKey === 'buenosaires' && promptKey === 'ai-menu-prompt') {
                     simulatedResponse = `**Desayuno (Buenos Aires Style):**\n- Opci√≥n 1: Caf√© con leche y 2 medialunas de manteca.\n- Opci√≥n 2: Tostadas de pan integral con queso blanco y mermelada sin az√∫car.\n\n**Almuerzo (Porte√±o Ligero):**\n- Opci√≥n 1: Ensalada Caesar con pollo grillado.\n- Opci√≥n 2: Milanesa de soja al horno con ensalada de hojas verdes y tomate.\n\n**Cena (Sabores de BA):**\n- Opci√≥n 1: Asado de tira (corte fino) a la parrilla con ensalada mixta.\n- Opci√≥n 2: Revuelto Gramajo (versi√≥n adaptada con menos papa y m√°s vegetales).`;
                }
                responseDiv.innerHTML = simulatedResponse.replace(/\n/g, '<br>');
            }, 2000);
        }

        document.addEventListener('DOMContentLoaded', () => {
            const idiomaGuardado = localStorage.getItem('idiomaPreferido') || 'es';
            translatePage(idiomaGuardado);

            const monedaGuardada = localStorage.getItem('monedaPreferida') || 'ARS';
            document.getElementById('moneda').value = monedaGuardada;
            cambiarMoneda();

            document.getElementById('btn-es').addEventListener('click', () => translatePage('es'));
            document.getElementById('btn-he').addEventListener('click', () => translatePage('he'));
        });
    </script>
</body>
</html>
